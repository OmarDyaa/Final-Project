@if (product) {
<mat-card
  appearance="raised"
  routerLink="/shop/{{ product.id }}"
  [class.opacity-75]="product.quantityInStock <= 0"
  class="product-card"
>
  <div class="relative group">
    <img
      class="w-full h-48 rounded-xl object-fill transition-transform duration-300 group-hover:scale-105"
      mat-card-image
      src="{{ product.pictureUrl }}"
      alt="Product image"
    />
    <div class="absolute right-2 my-4">
      <button
        mat-mini-fab
        color="primary"
        [disabled]="product.quantityInStock <= 0"
        class="transform hover:scale-110"
        (click)="$event.stopPropagation(); cartService.addItemToCart(product)"
      >
        <mat-icon>add_shopping_cart</mat-icon>
      </button>
    </div>
  </div>

  <mat-card-content class="p-4 flex flex-col h-full">
    <div class="flex-grow">
      <h2
        class="text-sm sm:text-base font-semibold text-gray-800 line-clamp-2 hover:text-primary transition-colors"
      >
        {{ product.name }}
      </h2>
      <p class="text-lg font-light line-clamp-2">{{ product.description }}</p>
    </div>

    <div class="mt-4 pt-2 border-t border-gray-100">
      <div class="flex items-center justify-between">
        <p
          class="text-lg font-semibold"
          [class.text-gray-500]="product.quantityInStock <= 0"
        >
          {{ product.price | currency }}
        </p>
        <div class="text-sm">
          <span
            [class.text-green-600]="product.quantityInStock > 0"
            [class.text-red-500]="product.quantityInStock <= 0"
          >
            {{ product.quantityInStock > 0 ? "In Stock" : "Out of Stock" }}
          </span>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>
}
